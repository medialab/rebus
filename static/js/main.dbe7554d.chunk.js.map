{"version":3,"sources":["helpers/getConfig.js","helpers/client.js","helpers/draftStrategies.js","components/SettingsManager.js","components/Tweet/styles.js","components/Tweet/Context.js","components/Tweet/Header.js","components/Tweet/Text.js","components/Tweet/utils.js","components/Tweet/Photos.js","components/Tweet/Video.js","components/Tweet/Media.js","components/Tweet/Footer.js","components/Tweet/Modal.js","components/Tweet/Quote.js","components/Tweet/Tweet.js","components/Tweet/index.js","helpers/extractTargetTerm.js","helpers/findRelatedTweets.js","components/TweetsTake.js","helpers/findRelatedCaptions.js","components/Caption.js","components/CaptionsTake.js","helpers/findRelatedLabels.js","components/Label.js","components/LabelsTake.js","components/RendererView.js","components/EditorView.js","components/Container.js","App.js","serviceWorker.js","index.js"],"names":["getConfig","window","CONFIG","sources","fetchConfig","Promise","resolve","reject","get","process","then","_ref","data","catch","getPrintCss","_ref2","getTweets","group","arguments","length","undefined","config","r","tweetsSpreadsheetGoogleDriveId","Tabletop","init","key","simpleSheet","callback","getCaptions","captionsGoogleDriveId","map","caption","Object","objectSpread","name","toLowerCase","e","getLabels","labelsGoogleDriveId","label","description","getImages","imagesGoogleDriveId","getImageSrc","image","imagesSrcBase","id","imageType","concat","HASHTAG_REGEX","TILDE_REGEX","DOLLAR_REGEX","findWithRegex","regex","contentBlock","matchArr","start","text","getText","exec","index","hashtagStrategy","contentState","tildeStrategy","dollarStrategy","settingsSchema","properties","cropCaptions","type","captionsLayout","enum","imagesWidth","labelsLayout","grabOnlyExactTweetMatches","lineHeight","default","SettingsManager","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","updateSettings","value","newSettings","context","settings","defineProperty","makeUi","model","onYes","onNo","react_default","a","createElement","className","onClick","onChange","checked","thatValue","handleClick","render","_assertThisInitialize","assertThisInitialized","objectDestructuringEmpty","_assertThisInitialize2","keys","Component","contextTypes","PropTypes","object","func","styles","tweet","backgroundColor","minHeight","maxWidth","transition","minWidth","borderBottom","color","fontFamily","fontSize","listStyleImage","listStylePosition","listStyleType","padding","position","textAlign","content","marginLeft","margin","accountGroup","textDecoration","avatar","float","marginTop","width","height","borderRadius","border","fullname","fontWeight","username","direction","unicodeBidi","s","b","time","retweet","link","timestamp","tweetText","whiteSpace","wordWrap","footer","display","paddingTop","ProfileTweetActionList","marginBottom","ProfileTweetAction","ProfileTweetActionBtn","background","WebkitAppearance","cursor","ProfileTweetActionCount","IconContainer","verticalAlign","IconTextContainer","Icon","fontStyle","IconContext","fill","AdaptiveMedia","maxHeight","overflow","AdaptiveMediaBadge","bottom","left","boxSizing","MozBoxSizing","zIndex","img","QuoteTweet","QuoteTweet:hover","QuoteLink","top","QuoteTweetInner","QuoteTweetAuthor","QuoteTweetText","video","objectFit","Modal","overflowX","ModalClose","ModalInner","Context","_this$props","linkProps","style","xmlns","viewBox","vertical-align","opacity","d","assign","href","user","screen_name","React","displayName","VerifiedBadge","Header","state","mounted","setState","tdate","system_date","Date","parse","user_date","diff","Math","floor","round","toString","substring","parseTwitterDate","createTimestamp","created_at","verified","twemoji","replace","src","profile_image_url","id_str","title","data-name","defaultProps","Text","targetTerm","entities","extended_entities","media","forEach","url","quoted_status","urls","u","expanded_url","indexOf","twitterText","autoLinkWithJSON","usernameIncludeSymbol","display_url","RegExp","tweetProps","dangerouslySetInnerHTML","__html","cloneDeep","obj","copy","setTime","getTime","Array","i","len","attr","hasOwnProperty","Error","Photos","idx","toggleModal","mediaElements","mediaStyle","m","containStyle","photoStyle","mediaHeight","sizes","large","h","mediaWidth","w","parseInt","marginRight","medium","push","bind","media_url","Video","gif","autoPlay","videoSrc","video_info","variants","v","VideoComponent","controls","loop","videojs","react_video_wrapper_default","Media","Tweet_Photos","Tweet_Video","Footer","count","num","log","pow","toFixed","readablize","retweet_count","formatCount","favorite_count","closeModal","modalIndex","retweeted_status","contentStyle","modalWrap","imgStyle","close","justifyContent","alignItems","Tweet_Header","Tweet_Text","Tweet_Footer","active","Quote","Tweet","updatePosition","targets","getElementsByClassName","target","parentPosition","getBoundingClientRect","childPosition","positionStyles","boxWidth","targetDimensions","random","componentDidMount","setTimeout","componentDidUpdate","modalActive","_this2","_this$state","isRT","MediaComponent","QuoteComponent","full_text","extended_tweet","display_text_range","is_quote_status","Tweet_Media","Tweet_Quote","ref","Tweet_Context","Tweet_Modal","childContextTypes","extractTargetTerm","children","values","slice","split","term","options","findRelatedTweets","tweets","filter","clean","includes","mapTweetToRender","from_user_name","from_user_realname","from_user_profile_image_url","TweetsTake","_assertThisInitialize3","_assertThisInitialize4","cluster","_assertThisInitialize5","container","_settings$grabOnlyExa","_extractTargetTerm","relatedTweets","containerStyle","containerDimensions","x","y","components_Tweet","array","string","findRelatedCaptions","captions","Caption","cropCaption","captionLayout","imageRatio","imageHeight","imageWidth","captionTargetWidth","captionWidthRatio","captionRatio","imageFinalWidth","imageFinalHeight","alt","CaptionsTake","imagesMap","_assertThisInitialize6","_settings$cropCaption","initialCropCaptions","_settings$imagesWidth","initialImagesWidth","_settings$captionsLay","initialCaptionsLayout","_extractTargetTerm$op","o","match","candidate","isNaN","displayedCaptions","tweetCluster","sort","score","image_id","components_Caption","findRelatedLabels","Label","layout","labelWidth","labelHeight","LabelsTake","labels","_settings$labelsLayou","initialLabelsLayout","displayedLabels","components_Label","code","codeBlock","addBreaklines","child","renderers","inline","BOLD","ITALIC","UNDERLINE","_ref3","CODE","_ref4","blocks","unstyled","blockquote","header-one","header-two","code-block","_ref5","unordered-list-item","_ref6","depth","ordered-list-item","_ref7","join","decorators","strategy","component","_ref8","components_TweetsTake","_ref9","components_CaptionsTake","_ref10","components_LabelsTake","RendererView","shouldComponentUpdate","autoUpdateEnabled","rawContent","renderCss","projectMetadata","subtitle","authors","_settings$lineHeight","rendered","redraft","bool","setAppElement","document","body","EditorView","noProps","handleUpdateState","editorState","setAutoUpdateEnabled","dataLoaded","updateDataForGroup","_ref$tweets","setProjectMetadata","updateCluster","toggleSettings","settingsOpen","clusters","toConsumableArray","uniq","t","handleMetadataChange","Draft","placeholder","rel","lib_default","head","lib","components_RendererView","thatCluster","encodeURIComponent","frames","preview","focus","print","react_modal_lib_default","isOpen","onRequestClose","contentLabel","components_SettingsManager","startingText","compositeDecorator","CompositeDecorator","App","location","queryParts","query","reverse","p","reduce","res","tuple","decodeURIComponent","console","error","getChildContext","images","captionsLoaded","imagesLoaded","labelsLoaded","tweetsLoaded","localStorage","setItem","JSON","stringify","updateRawContent","convertToRaw","getCurrentContent","rawStr","startText","getItem","EditorState","createWithContent","ContentState","createFromText","localMetadata","localSettings","schemaDefaults","captionsMap","debounce","Route","path","exact","HashRouter","Container","Boolean","hostname","ReactDOM","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.dbe7554d.chunk.js","sourcesContent":["\nexport default () => window.CONFIG || {sources: {}}","import Tabletop from 'tabletop';\nimport get from 'axios';\n\nimport getConfig from './getConfig';\n\nconst RENDER_CSS_URL = process.env.PUBLIC_URL + '/render.css';\nconst CONFIG_URL = process.env.PUBLIC_URL + '/config.json';\n\nexport const fetchConfig = () => \n  new Promise((resolve, reject) => {\n    get(CONFIG_URL)\n      .then(({data}) => resolve(data))\n      .catch(reject)\n  })\n\nexport const getPrintCss = () => \n  new Promise((resolve, reject) => {\n    get(RENDER_CSS_URL)\n      .then(({data}) => resolve(data))\n      .catch(reject)\n  })\n\nexport const getTweets = (group = 'default') => {\n  const config = getConfig();\n  if (!config.sources[group]) {\n    return new Promise((r, reject) => reject('no config'));\n  }\n  const {\n    sources: {\n      [group]: {\n        tweetsSpreadsheetGoogleDriveId\n      }\n    }\n  } = config;\n  return new Promise((resolve) => {\n    Tabletop.init({ \n      key: tweetsSpreadsheetGoogleDriveId, \n      simpleSheet: true,\n      callback: (data) => {\n        resolve(data);\n      } \n    })\n  })\n}\n\nexport const getCaptions = (group = 'default') => {\n  const config = getConfig();\n  if (!config.sources[group]) {\n    return new Promise((r, reject) => reject('no config'));\n  }\n  const {\n    sources: {\n      [group]: {\n        captionsGoogleDriveId\n      }\n    }\n  } = config;\n  return new Promise((resolve, reject) => {\n\n    Tabletop.init({ \n      key: captionsGoogleDriveId, \n      simpleSheet: true,\n      callback: (data) => {\n        try{\n          resolve(\n            data.map(caption => ({\n              ...caption,\n              caption: caption.name.toLowerCase()\n            }))\n            )\n        } catch(e) {\n          reject(e);\n        }\n      } \n    })\n  })\n}\nexport const getLabels = (group = 'default') => {\n  const config = getConfig();\n  if (!config.sources[group]) {\n    return new Promise((r, reject) => reject('no config'));\n  }\n  const {\n    sources: {\n      [group]: {\n        labelsGoogleDriveId\n      }\n    }\n  } = config;\n  return new Promise((resolve, reject) => {\n\n    Tabletop.init({ \n      key: labelsGoogleDriveId, \n      simpleSheet: true,\n      callback: (data) => {\n        try{\n          resolve(\n            data.map(label => ({\n              ...label,\n              description: label.description.toLowerCase()\n            }))\n            )\n        } catch(e) {\n          reject(e);\n        }\n      } \n    })\n  })\n}\nexport const getImages = (group = 'default') => {\n  const config = getConfig();\n  if (!config.sources[group]) {\n    return new Promise((r, reject) => reject('no config'));\n  }\n  const {\n    sources: {\n      [group]: {\n        imagesGoogleDriveId\n      }\n    }\n  } = config;\n  return new Promise((resolve, reject) => {\n\n    Tabletop.init({ \n      key: imagesGoogleDriveId, \n      simpleSheet: true,\n      callback: (data) => {\n        try{\n          resolve(data);\n        } catch(e) {\n          reject(e);\n        }\n      } \n    })\n  })\n}\n\nexport const getImageSrc = (image = {}, group = 'default') => {\n  const config = getConfig();\n  if (!config.sources[group]) {\n    return undefined;\n  }\n  const {\n    sources: {\n      [group]: {\n        imagesSrcBase    \n      }\n    }\n    \n  } = config;\n\n  const {id, imageType} = image;\n\n  return `${imagesSrcBase}/${id}.${imageType}`\n}","\nconst HASHTAG_REGEX = /#[\\w\\u0590-\\u05fféèîû:]+/g;\nconst TILDE_REGEX = /~[\\w\\u0590-\\u05fféèîû:]+/g;\nconst DOLLAR_REGEX = /\\$[\\w\\u0590-\\u05fféèîû:]+/g;\n\nconst findWithRegex = (regex, contentBlock, callback) => {\n  const text = contentBlock.getText();\n  let matchArr, start;\n  while ((matchArr = regex.exec(text)) !== null) {\n    start = matchArr.index;\n    callback(start, start + matchArr[0].length);\n  }\n}\n\nexport const hashtagStrategy = (contentBlock, callback, contentState) => {\n  findWithRegex(HASHTAG_REGEX, contentBlock, callback);\n}\nexport const tildeStrategy = (contentBlock, callback, contentState) => {\n  findWithRegex(TILDE_REGEX, contentBlock, callback);\n}\nexport const dollarStrategy = (contentBlock, callback, contentState) => {\n  findWithRegex(DOLLAR_REGEX, contentBlock, callback);\n}","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\n\nexport const settingsSchema = {\n  properties: {\n    cropCaptions: {\n      description: 'crop captions',\n      type: 'boolean'\n    },\n\n    captionsLayout: {\n      description: 'captions layout',\n      type: 'string',\n      enum: ['align', 'stack']\n    },\n    \n    imagesWidth: {\n      description: 'images width',\n      type: 'string',\n      enum: ['word width', '10', '20', '50', '100', '150', '200', '250', '300', '350', '400', '450', '500']\n    },\n    \n    labelsLayout: {\n      description: 'labels layout',\n      type: 'string',\n      enum: ['stack', 'random', 'superpoze']\n    },\n    grabOnlyExactTweetMatches: {\n      description: 'grab only tweets that match exactly the words',\n      type: 'boolean',\n    },\n\n    lineHeight: {\n      description: 'poster text line height',\n      type: 'string',\n      enum: ['1', '1.1', '1.2', '1.3', '1.4', '1.5', '1.6', '1.7', '1.8', '1.9', '2']\n    }\n    \n  },\n  default: {\n    cropCaptions: false,\n    labelsLayout: 'random',\n    imagesWidth: 'word width',\n    captionsLayout: 'align',\n    grabOnlyExactTweetMatches: false,\n    lineHeight: 'double'\n  }\n}\n\nclass SettingsManager extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  updateSettings = (key, value) => {\n    const newSettings = {\n      ...this.context.settings,\n      [key]: value\n    };\n    this.context.updateSettings(newSettings);\n  }\n\n  makeUi = (model, key, value) => {\n    switch(model.type) {\n      case 'boolean':\n        const onYes = () => {\n          this.updateSettings(key, true);\n        }\n        const onNo = () => {\n          this.updateSettings(key, false);\n        }\n        return (\n          <ul className=\"multiple-choices\">\n            <li onClick={onYes}>\n              <input \n              type=\"radio\" \n              onChange={onYes}\n              value={true}\n                     checked={value === true}\n              />\n              <label>Yes</label>\n            </li>\n            <li onClick={onNo}>\n              <input \n              type=\"radio\" \n              value={false}\n              checked={value === false}\n              onChange={onNo}\n              />\n              <label>No</label>\n            </li>\n          </ul>\n        );\n      case 'string':\n        if (model.enum) {\n          return (\n            <ul className=\"multiple-choices\">\n              {\n                model.enum.map((thatValue, index) => {\n                  const handleClick = () => {\n                    this.updateSettings(key, thatValue);\n                  }\n                  return (\n                    <li onClick={handleClick} key={index}>\n                      <input \n                        onChange={handleClick} \n                        type=\"radio\" \n                        id=\"no\" \n                        value={thatValue}\n                        checked={value === thatValue}\n                      />\n                      <label>\n                        {thatValue}\n                      </label>\n                    </li>\n                  )\n                })\n              }\n            </ul>\n          );\n        }\n        return null;\n      default:\n        return null;\n    }\n  }\n\n  render = () => {\n    const {\n      props: {\n\n      },\n      context: {\n        settings,\n        updateSettings,\n      },\n      makeUi\n    } = this;\n    return (\n      <div>\n        {\n          Object.keys(settingsSchema.properties).map((key, index) => {\n            const model = settingsSchema.properties[key];\n            return (\n              <div key={index}>\n                <h3>{model.description}</h3>\n                {makeUi(model, key, settings[key])}\n              </div>\n            )\n          })\n        }\n      </div>\n    )\n  }\n}\n\nSettingsManager.contextTypes = {\n  settings: PropTypes.object,\n  updateSettings: PropTypes.func,\n}\n\nexport default SettingsManager;","// const fontSize = fontSize;\nconst fontSize = '14px';\nconst fontColor = '#484e54' // '#14171a';\n\nexport default {\n  'tweet': {\n    // 'backgroundColor': '#ffffff',\n    'backgroundColor': 'rgba(255,255,255,0.5)',\n    'minHeight': '51px',\n    'maxWidth': '588px',\n    transition: 'all 1s ease',\n    'minWidth': '350px',\n    'borderBottom': '1px solid #e6ecf0',\n    'color': fontColor,\n    'fontFamily': '\"Helvetica Neue\", \"Helvetica\", \"Arial\", \"sans-serif\"',\n    'fontSize': fontSize,\n    'lineHeight': '20px',\n    'listStyleImage': 'none',\n    'listStylePosition': 'outisde',\n    'listStyleType': 'none',\n    'padding': '9px 12px',\n    'position': 'relative',\n    'textAlign': 'start'\n  },\n  'content': {\n    'marginLeft': '58px'\n  },\n  'context': {\n    'margin': '-3px 0 3px 34px'\n  },\n  'accountGroup': {\n    'color': '#8899a6',\n    'textDecoration': 'none'\n  },\n  'avatar': {\n    'float': 'left',\n    'marginTop': '3px',\n    'marginLeft': '-58px',\n    'width': '48px',\n    'height': '48px',\n    'borderRadius': '24px',\n    'border': 0\n  },\n  'fullname': {\n    'fontWeight': 'bold',\n    'color': fontColor\n  },\n  'username': {\n    'direction': 'ltr',\n    'unicodeBidi': 'embed',\n    'fontSize': fontSize,\n    'color': '#657786'\n  },\n  's': {\n    'color': '#b1bbc3',\n    'textDecoration': 'none'\n  },\n  'b': {\n    'fontWeight': 'normal'\n  },\n  'time': {\n    'color': '#657786'\n  },\n  'retweet': {\n    'color': '#657786',\n    'fontSize': '12px',\n    'lineHeight': '16.5px',\n    'marginLeft': '8px'\n  },\n  'link': {\n    'textDecoration': 'none'\n  },\n  'timestamp': {\n    'fontSize': fontSize,\n    'textDecoration': 'none',\n    'color': '#8899a6'\n  },\n  'tweetText': {\n    'whiteSpace': 'pre-wrap',\n    'wordWrap': 'break-word',\n    'color': fontColor,\n    'margin': 0\n  },\n  'footer': {\n    'display': 'table',\n    'width': '100%',\n    'fontSize': '12px',\n    'paddingTop': '1px'\n  },\n  'ProfileTweetActionList': {\n    'fontSize': '0em',\n    'lineHeight': '1',\n    'marginTop': '10px',\n    'marginBottom': '2px',\n    'display': 'block'\n  },\n  'ProfileTweetAction': {\n    'display': 'inline-block',\n    'width': '80px'\n  },\n  'ProfileTweetActionBtn': {\n    'display': 'inline-block',\n    'fontSize': '16px',\n    'lineHeight': '1',\n    'padding': '0 2px',\n    'position': 'relative',\n    'border': 0,\n    'background': 'transparent',\n    'margin': 0,\n    'WebkitAppearance': 'button',\n    'cursor': 'pointer'\n  },\n  'ProfileTweetActionCount': {\n    'color': '#657786',\n    'display': 'inline-block',\n    'fontSize': '12px',\n    'fontWeight': 'bold',\n    'marginLeft': '6px',\n    'position': 'relative',\n  },\n  'IconContainer': {\n    'display': 'inline-block',\n    'verticalAlign': 'middle',\n  },\n  'IconTextContainer': {\n    'display': 'inline-block',\n  },\n  'Icon': {\n    'background': 'transparent',\n    'display': 'inline-block',\n    'fontStyle': 'normal',\n    'position': 'relative',\n  },\n  'IconContext': {\n    'background': '#77b255',\n    'display': 'inline-block',\n    'fontStyle': 'normal',\n    'verticalAlign': 'middle',\n    'position': 'relative',\n    'width': '15px',\n    'height': fontSize,\n    'fill': 'white',\n    'borderRadius': '2px'\n  },\n  'AdaptiveMedia': {\n    'display': 'inline-block',\n    'maxHeight': '508px',\n    'maxWidth': '508px',\n    'margin': '10px 0 0 0',\n    'overflow': 'hidden',\n    'border': '1px solid rgba(0,0,0,0.1)',\n    'borderRadius': '5px',\n    'verticalAlign': 'top',\n    'textAlign': 'center',\n    'width': '100%'\n  },\n  'AdaptiveMediaBadge': {\n    'background': 'rgba(0, 0, 0, 0.3)',\n    'borderRadius': '3px',\n    'bottom': '52px',\n    'left': '80px',\n    'boxSizing': 'border-box',\n    'MozBoxSizing': 'border-box',\n    'color': '#fff',\n    'height': '20px',\n    'lineHeight': '20px',\n    'fontWeight': '700',\n    'padding': '0 5px',\n    'position': 'absolute',\n    'zIndex': 1\n  },\n  'img': {\n    'width': '100%'\n  },\n  'QuoteTweet': {\n    'marginTop': '12px',\n    'border': 'solid 1px #e6ecf0',\n    'cursor': 'pointer',\n    'borderRadius': '4px',\n    'position': 'relative'\n  },\n  'QuoteTweet:hover': {\n    'border': 'solid 1px aab8c2'\n  },\n  'QuoteLink': {\n    'height': '100%',\n    'left': 0,\n    'position': 'absolute',\n    'top': 0,\n    'width': '100%'\n  },\n  'QuoteTweetInner': {\n    'padding': '12px'\n  },\n  'QuoteTweetAuthor': {\n    'display': 'inline-block',\n    'maxWidth': '100%',\n    'position': 'relative',\n    'zIndex': 1\n  },\n  'QuoteTweetText': {\n    'marginTop': '3px',\n    'maxHeight': '78px',\n    'maxWidth': '100%',\n    'overflow': 'hidden',\n    'whiteSpace': 'pre-wrap',\n    'wordWrap': 'break-word'\n  },\n  'video': {\n    'width': '100%',\n    'verticalAlign': 'bottom',\n    'maxHeight': '508px',\n    'objectFit': 'contain',\n    'background': '#000000'\n  },\n  'Modal': {\n    'position': 'fixed',\n    'top': 0,\n    'left': 0,\n    'zIndex': 999999999999,\n    'overflowX': 'hidden',\n    'textAlign': 'center',\n    'background': 'rgba(0, 0, 0, 0.8)',\n    'display': 'table',\n    'width': '100%',\n    'height': '100vh'\n  },\n  'ModalClose': {\n    'position': 'fixed',\n    'top': 0,\n    'left': 0,\n    'zIndex': 10,\n    'overflowX': 'hidden',\n    'textAlign': 'center',\n    'display': 'table',\n    'width': '100%',\n    'height': '100vh'\n  },\n  'ModalInner': {\n    'display': 'table-cell',\n    'verticalAlign': 'middle',\n    'position': 'relative',\n    'zIndex': 20\n  }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles'\n\nclass Context extends React.Component {\n  render () {\n    const {data, linkProps} = this.props\n\n    return (\n      <div className=\"context\" style={styles.context}>\n        <div className=\"tweet-context\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"15\" viewBox=\"0 0 24 24\" style={{'vertical-align': 'sub'}}> \n          <path opacity=\"0\" d=\"M0 0h24v24H0z\"></path> \n          <path fill=\"rgb(101, 119, 134)\" d=\"M23.615 15.477c-.47-.47-1.23-.47-1.697 0l-1.326 1.326V7.4c0-2.178-1.772-3.95-3.95-3.95h-5.2c-.663 0-1.2.538-1.2 1.2s.537 1.2 1.2 1.2h5.2c.854 0 1.55.695 1.55 1.55v9.403l-1.326-1.326c-.47-.47-1.23-.47-1.697 0s-.47 1.23 0 1.697l3.374 3.375c.234.233.542.35.85.35s.613-.116.848-.35l3.375-3.376c.467-.47.467-1.23-.002-1.697zM12.562 18.5h-5.2c-.854 0-1.55-.695-1.55-1.55V7.547l1.326 1.326c.234.235.542.352.848.352s.614-.117.85-.352c.468-.47.468-1.23 0-1.697L5.46 3.8c-.47-.468-1.23-.468-1.697 0L.388 7.177c-.47.47-.47 1.23 0 1.697s1.23.47 1.697 0L3.41 7.547v9.403c0 2.178 1.773 3.95 3.95 3.95h5.2c.664 0 1.2-.538 1.2-1.2s-.535-1.2-1.198-1.2z\"></path> \n       </svg>\n          <span className=\"retweet-text\" style={styles.retweet}>\n            <a className=\"pretty-link\" href={`https://twitter.com/${data.user.screen_name}`} style={{'textDecoration': 'none', 'color': '#657786'}} {...linkProps}>\n              {data.user.name}\n            </a>\n            {' Retweeted'}\n          </span>\n        </div>\n      </div>\n    )\n  }\n}\n\nContext.propTypes = {\n  'data': PropTypes.object\n}\n\nContext.displayName = 'Context'\n\nexport default Context\n","import React from 'react'\nimport styles from './styles'\nimport twemoji from 'twemoji'\n\nfunction VerifiedBadge() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"12.6\" viewBox=\"0 0 24 24\" className=\"htc-icon htc-icon--verified\">\n      <path style={{fill: \"#1DA1F2\"}} opacity=\"0\" d=\"M0 0h24v24H0z\"></path> \n      <path style={{fill: \"#1DA1F2\"}} d=\"M22.5 12.5c0-1.58-.875-2.95-2.148-3.6.154-.435.238-.905.238-1.4 0-2.21-1.71-3.998-3.818-3.998-.47 0-.92.084-1.336.25C14.818 2.415 13.51 1.5 12 1.5c-1.51 0-2.816.917-3.437 2.25-.415-.165-.866-.25-1.336-.25-2.11 0-3.818 1.79-3.818 4 0 .494.083.964.237 1.4-1.272.65-2.147 2.018-2.147 3.6 0 1.495.782 2.798 1.942 3.486-.02.17-.032.34-.032.514 0 2.21 1.708 4 3.818 4 .47 0 .92-.086 1.335-.25.62 1.334 1.926 2.25 3.437 2.25 1.512 0 2.818-.916 3.437-2.25.415.163.865.248 1.336.248 2.11 0 3.818-1.79 3.818-4 0-.174-.012-.344-.033-.513 1.158-.687 1.943-1.99 1.943-3.484zm-6.616-3.334l-4.334 6.5c-.145.217-.382.334-.625.334-.143 0-.288-.04-.416-.126l-.115-.094-2.415-2.415c-.293-.293-.293-.768 0-1.06s.768-.294 1.06 0l1.77 1.767 3.825-5.74c.23-.345.696-.436 1.04-.207.346.23.44.696.21 1.04z\"></path> \n    </svg>\n  );\n}\n\nclass Header extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      mounted: false,\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      mounted: true,\n    })\n  }\n\n  createTimestamp (time) {\n    if (!time || !this.state.mounted) return null\n\n    const parseTwitterDate = tdate => {\n      let system_date = new Date(Date.parse(tdate))\n      var user_date = new Date()\n\n      let diff = Math.floor((user_date - system_date) / 1000)\n      if (diff < 59) {return diff + \"s\"}\n      if (diff <= 3540) {return Math.round(diff / 60) + \"m\"}\n      if (diff <= 86400) {return Math.round(diff / 3600) + \"h\"}\n      if (diff < 604800) {return Math.round(diff / 86400) + \"d\"}\n      return system_date.toString().substring(4, 10)\n    }\n\n    return parseTwitterDate(time)\n  }\n\n  render () {\n    const {data, linkProps} = this.props\n    const timestamp = this.createTimestamp(data.created_at)\n    \n    let verified = null;\n    if (data.user.verified) {\n      verified = <VerifiedBadge />;\n    }\n    \n\n    let {name} = data.user\n    name = twemoji.parse(name)\n    name = name.replace(/<img class=\"emoji\"/g, '<img class=\"emoji\" style=\"height:14px;margin-right:5px;\"')\n\n    return (\n      <div className=\"header\">\n        <a className=\"account-group\" style={styles.accountGroup} href={`https://twitter.com/${data.user.screen_name}`} {...linkProps}>\n          <img className=\"avatar\" src={data.user.profile_image_url} style={styles.avatar} />\n          <strong className=\"fullname\" style={styles.fullname}>{data.user.name}</strong>\n          {verified}\n          <span>&nbsp;</span>\n          <span className=\"username\" style={styles.username}>\n            <s style={styles.s}>{'@'}</s>\n            <b style={styles.b}>{data.user.screen_name}</b>\n          </span>\n        </a>\n        <small className=\"time\" style={styles.time}>\n          <a href={`https://twitter.com/${data.user.screen_name}/status/${data.id_str}`} className=\"tweet-timestamp\" style={styles.timestamp} {...linkProps}>\n            {' • '}{timestamp}\n          </a>\n        </small>\n        <a href={`https://twitter.com/${data.user.screen_name}/status/${data.id_str}`} title=\"View on Twitter\" {...linkProps}>\n        <div style={{'float': 'right', marginTop: '-3px'}}>\n        <svg id=\"Logo_FIXED\" data-name=\"Logo — FIXED\" xmlns=\"http://www.w3.org/2000/svg\" width=\"25\" height=\"25\" viewBox=\"0 0 400 400\">\n          <path fill='#1da1f2' d=\"M153.62,301.59c94.34,0,145.94-78.16,145.94-145.94,0-2.22,0-4.43-.15-6.63A104.36,104.36,0,0,0,325,122.47a102.38,102.38,0,0,1-29.46,8.07,51.47,51.47,0,0,0,22.55-28.37,102.79,102.79,0,0,1-32.57,12.45,51.34,51.34,0,0,0-87.41,46.78A145.62,145.62,0,0,1,92.4,107.81a51.33,51.33,0,0,0,15.88,68.47A50.91,50.91,0,0,1,85,169.86c0,.21,0,.43,0,.65a51.31,51.31,0,0,0,41.15,50.28,51.21,51.21,0,0,1-23.16.88,51.35,51.35,0,0,0,47.92,35.62,102.92,102.92,0,0,1-63.7,22A104.41,104.41,0,0,1,75,278.55a145.21,145.21,0,0,0,78.62,23\"/>\n        </svg>\n        </div>\n        </a>\n      </div>\n    )\n  }\n}\n\nHeader.defaultProps = {\n  'data': {\n    'user': {}\n  }\n}\n\nHeader.displayName = 'Header'\n\nexport default Header\n\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles'\nimport twemoji from 'twemoji'\nimport twitterText from 'twitter-text'\n\nclass Text extends React.Component {\n  render () {\n    let {\n      data,\n      targetTerm\n    } = this.props\n    let {text, entities, extended_entities} = data\n\n    // remove any embedded media links\n    if (entities && entities.media) {\n      entities.media.forEach( e => {\n        text = text.replace(e.url, '')\n      })\n    }\n\n    // remove any quote links\n    if (entities && data.quoted_status) {\n      entities.urls.forEach( u => {\n        if (u.expanded_url.indexOf('/status/') > -1) {\n          text = text.replace(u.url, '')\n        }\n      })\n    }\n\n    // replace + style links and mentions\n    text = twitterText.autoLinkWithJSON(text, (entities || {}), {'usernameIncludeSymbol': true})\n    text = text.replace(/href=/g, 'style=\"text-decoration: none;color:#1da1f2;\" target=\"blank\" rel=\"noopener\" href=')\n\n    // replace + style emoji\n    text = twemoji.parse(text)\n    text = text.replace(/<img class=\"emoji\"/g, '<img class=\"emoji\" style=\"height:14px;margin-right:5px;\"')\n    // browsers add http which causes isomorphic rendering probs\n    text = text.replace(/src=\"\\/\\/twemoji/g, 'src=\"http://twemoji')\n\n    // remove any extended entities links\n    if (extended_entities && extended_entities.media) {\n      extended_entities.media.forEach(e => {\n        text = text.replace(e.display_url, '')\n      })\n    }\n    // replace target term\n    text = text.replace(new RegExp(targetTerm, 'gi'), `<span class=\"targeted\">${targetTerm}</span>`)\n\n\n    const tweetProps = {\n      'className': 'tweet-text',\n      'style': styles.tweetText,\n      'dangerouslySetInnerHTML': {\n        '__html': text\n      }\n    }\n\n    return <p {... tweetProps} />\n  }\n}\n\nText.propTypes = {\n  'data': PropTypes.object\n}\n\nText.displayName = 'Text'\n\nexport default Text\n","const cloneDeep = obj => {\n    var copy\n\n    // Handle the 3 simple types, and null or undefined\n    if (null == obj || \"object\" != typeof obj) return obj\n\n    // Handle Date\n    if (obj instanceof Date) {\n        copy = new Date()\n        copy.setTime(obj.getTime())\n        return copy\n    }\n\n    // Handle Array\n    if (obj instanceof Array) {\n        copy = []\n        for (var i = 0, len = obj.length; i < len; i++) {\n            copy[i] = cloneDeep(obj[i])\n        }\n        return copy\n    }\n\n    // Handle Object\n    if (obj instanceof Object) {\n        copy = {}\n        for (var attr in obj) {\n            if (obj.hasOwnProperty(attr)) copy[attr] = cloneDeep(obj[attr])\n        }\n        return copy\n    }\n\n    throw new Error(\"Unable to copy obj! Its type isn't supported.\")\n}\n\nexport {cloneDeep}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles'\nimport {cloneDeep} from './utils'\n\nclass Photos extends React.Component {\n  constructor (props, context) {\n    super(props, context)\n  }\n\n  onClick (idx) {\n    this.context.toggleModal(idx)\n  }\n\n  render () {\n    let {media} = this.props\n\n    let mediaElements = [], mediaStyle = cloneDeep(styles.AdaptiveMedia)\n    if (media.length === 2) mediaStyle.height = '253px'\n    if (media.length === 3) mediaStyle.height = '337px'\n    if (media.length === 4) mediaStyle.height = '380px'\n\n    // start media loop\n    media.forEach( (m, i) => {\n      // set initial sizes / styles\n      let containStyle = {'width': '100%', 'position': 'relative', 'overflow': 'hidden'}\n      let photoStyle = {'width': '100%', 'position': 'relative', 'verticalAlign': 'bottom'}\n      let mediaHeight = m.sizes.large.h, mediaWidth = m.sizes.large.w\n\n      /*\n       * format single photo\n       */\n      if (media.length === 1) {\n        // 508 is the width of a tweet media wrapper\n        // if image is wider than this, it's height will be reduced\n        // proportionally, so we adjust our calculation\n        if (mediaWidth > 508) {\n          const ratio = (100 / mediaWidth) * 508\n          mediaHeight = mediaHeight * (ratio / 100)\n        }\n\n        // check if image is taller than maxHeight, if so\n        // center it with a negative top value\n        const maxHeight = parseInt(mediaStyle.maxHeight.replace('px', ''))\n\n        if (mediaHeight > maxHeight) {\n          photoStyle.top = `${(maxHeight - mediaHeight) / 2}px`\n        }\n      }\n\n      /*\n       * format two photos\n       */\n      if (media.length === 2) {\n        const maxHeight = 253\n        photoStyle.width = 'auto'\n        photoStyle.height = '100%'\n        containStyle.display = 'inline-block'\n        containStyle.height = '100%'\n        // give first image 1px margin right and calc width to adjust\n        if (i === 0) containStyle.marginRight = '1px'\n        containStyle.width = 'calc(50% - .5px)'\n\n        const ratio = (100 / mediaWidth) * (508 /2)\n        mediaHeight = mediaHeight * (ratio / 100)\n\n        if (mediaHeight > maxHeight) {\n          photoStyle.top = `${(maxHeight - mediaHeight) / 2}px`\n          photoStyle.width = '100%'\n          photoStyle.height = 'auto'\n        } else if (mediaWidth > (508 / 2)) {\n          const ratio = (100 / m.sizes.large.h) * 253\n          mediaWidth = mediaWidth * (ratio / 100)\n          photoStyle.left = `${((508 / 2) - mediaWidth) / 2}px`\n        }\n      }\n\n      /*\n       * format three photos\n       */\n      if (media.length === 3)  {\n        if (i === 0) {\n          const maxHeight = 337\n          containStyle.width = `${100 * (2/3)}%`\n          containStyle.marginRight = '1px'\n          containStyle.height = '337px'\n          containStyle.float = 'left'\n          const firstWrapWidth = 508 * (2 / 3)\n\n          const ratio = (100 / mediaHeight) * 337\n          mediaWidth = mediaWidth * (ratio / 100)\n\n          const newRatio = (100 / m.sizes.medium.w) * firstWrapWidth\n          mediaHeight = mediaHeight * (newRatio / 100)\n\n          if (mediaHeight > maxHeight) {\n            photoStyle.top = `${(maxHeight - mediaHeight) / 2}px`\n          }\n\n          if (mediaWidth > firstWrapWidth) {\n            photoStyle.width = 'auto'\n            photoStyle.height = '100%'\n            photoStyle.left = `${((508 * (2/3)) - mediaWidth) / 2}px`\n          }\n        }\n        if (i !== 0) {\n          mediaHeight = m.sizes.medium.h\n          mediaWidth = m.sizes.medium.w\n          const maxHeight = 337 / 2\n          const maxWidth = 508 * 1/3\n\n          const ratio = (100 / mediaWidth) * maxWidth\n          mediaHeight = mediaHeight * (ratio / 100)\n\n          if (mediaHeight > maxHeight) {\n            photoStyle.top = `${(maxHeight - mediaHeight) / 2}px`\n          } else if (mediaWidth > maxWidth) {\n            photoStyle.width = 'auto'\n            photoStyle.height = '100%'\n            const newRatio = (100 / m.sizes.medium.h) * maxWidth\n            mediaWidth = mediaWidth * (newRatio / 100)\n            photoStyle.left = `${(maxWidth - mediaWidth) / 2}px`\n          }\n\n          containStyle.float = 'left'\n          containStyle.marginBottom = '1px'\n          containStyle.height = `calc(100% / 2 - 1px/2)`\n          containStyle.width = `calc(100% / 3 - 1px)`\n        }\n      }\n\n      /*\n       * format four photos\n       */\n      if (media.length === 4) {\n        if (i === 0) {\n          containStyle.width = '75%'\n          containStyle.marginRight = '1px'\n          containStyle.height = '380px'\n          containStyle.float = 'left'\n          const firstWrapWidth = 508 * 0.75\n          const maxHeight = 380\n\n          const ratio = (100 / mediaHeight) * 380\n          mediaWidth = mediaWidth * (ratio / 100)\n\n          const newRatio = (100 / m.sizes.medium.w) * firstWrapWidth\n          mediaHeight = mediaHeight * (newRatio / 100)\n\n\n          if (mediaHeight > maxHeight) {\n            photoStyle.top = `${(maxHeight - mediaHeight) / 2}px`\n          }\n\n          if (mediaWidth > firstWrapWidth) {\n            photoStyle.width = 'auto'\n            photoStyle.height = '100%'\n            photoStyle.left = `${((508 * 0.75) - mediaWidth) / 2}px`\n          }\n        }\n        if (i !== 0) {\n          mediaHeight = m.sizes.medium.h\n          mediaWidth = m.sizes.medium.w\n          const maxHeight = 380 / 3\n          const maxWidth = 508 * 1/4\n\n          const ratio = (100 / mediaWidth) * maxWidth\n          mediaHeight = mediaHeight * (ratio / 100)\n\n          if (mediaHeight > maxHeight) {\n            photoStyle.top = `${(maxHeight - mediaHeight) / 2}px`\n          } else if (mediaWidth > maxWidth) {\n            photoStyle.width = 'auto'\n            photoStyle.height = '100%'\n            const newRatio = (100 / m.sizes.medium.h) * maxWidth\n            mediaWidth = mediaWidth * (newRatio / 100)\n            photoStyle.left = `${(maxWidth - mediaWidth) / 2}px`\n          }\n\n          containStyle.height = 'calc(100% / 3 - 2px/3)'\n          containStyle.marginBottom = '1px'\n          containStyle.float = 'left'\n          containStyle.width = 'calc(25% - 1px)'\n        }\n      }\n\n\n      mediaElements.push(\n        <div onClick={this.onClick.bind(this, i)} className=\"AdaptiveMedia-photoContainer\" style={containStyle} key={i}>\n          <img src={m.media_url} style={photoStyle} />\n        </div>\n      )\n    })\n    // end media loop\n\n    return (\n      <div className=\"AdaptiveMedia\" style={mediaStyle}>\n        {mediaElements}\n      </div>\n    )\n  }\n}\n\nPhotos.contextTypes = {\n  'toggleModal': PropTypes.func\n}\n\nPhotos.propTypes = {\n  'media': PropTypes.array\n}\n\nPhotos.displayName = 'Photos'\n\nexport default Photos\n\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles'\nimport VideoJS from 'react-video-wrapper'\n\nclass Video extends React.Component {\n  render () {\n    let {media, gif, autoPlay} = this.props, videoSrc = ''\n\n    media[0].video_info.variants.forEach( v => {\n      if (v.url.indexOf('.mp4') > -1) {\n        videoSrc = v.url\n      }\n    })\n\n    let VideoComponent = (\n      <video src={videoSrc} controls={!gif} autoPlay={gif || autoPlay} loop={gif} style={styles.video}>\n        {'Your browser does not support the '}<code>{'video '}</code>{'element.'}\n      </video>\n    )\n\n    if (typeof videojs !== 'undefined') {\n      VideoComponent = (\n        <VideoJS src={videoSrc} controls={!gif} autoPlay={gif || autoPlay} loop={gif} style={styles.video}>\n          {'Your browser does not support the '}<code>{'video '}</code>{'element.'}\n        </VideoJS>\n      )\n    }\n\n    return (\n      <div className=\"AdaptiveMedia\" style={styles.AdaptiveMedia}>\n        {VideoComponent}\n        {gif ?\n          <div className=\"AdaptiveMedia-badge\" style={styles.AdaptiveMediaBadge}>\n            GIF\n          </div> : null}\n      </div>\n    )\n  }\n}\n\nVideo.propTypes = {\n  'media': PropTypes.array,\n  'gif': PropTypes.bool\n}\n\nVideo.defaultProps = {\n  'media': [],\n  'gif': false\n}\n\nVideo.displayName = 'Video'\n\nexport default Video\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Photos from './Photos'\nimport Video from './Video'\n\nclass Media extends React.Component {\n  render () {\n    switch (this.props.media[0].type) {\n      case 'photo':\n        return <Photos {... this.props} />\n      case 'video':\n        return <Video {... this.props} />\n      case 'animated_gif':\n        return <Video gif={true} {... this.props} />\n      default:\n        return <div />\n    }\n  }\n}\n\nMedia.propTypes = {\n  'media': PropTypes.array\n}\n\nMedia.defaultProps = {\n  'media': [{'type': ''}]\n}\n\nMedia.displayName = 'Media'\n\nexport default Media\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles'\n\nclass Footer extends React.Component {\n  formatCount (count) {\n    const readablize = num => {\n      var e = Math.floor(Math.log(num) / Math.log(1000))\n      return (num / Math.pow(1000, e)).toFixed(1) + 'K'\n    }\n\n    if (count > 999) return readablize(count)\n    else return count\n  }\n\n  render () {\n    const {data, linkProps} = this.props\n\n    return (\n      <div className=\"footer\" style={styles.footer}>\n        <a className=\"ProfileTweet-actionList\" style={styles.ProfileTweetActionList} href={`http://twitter.com/${data.user.screen_name}/status/${data.id_str}`} {...linkProps}>\n          <div className=\"ProfileTweet-action\" style={styles.ProfileTweetAction}>\n            <button className=\"ProfileTweet-actionButton\" style={styles.ProfileTweetActionBtn}>\n              <div className=\"IconContainer\" style={styles.IconContainer}>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\"> \n                  <path opacity=\"0\" d=\"M0 0h24v24H0z\"></path> \n                  <path fill='#657786' d=\"M14.046 2.242l-4.148-.01h-.002c-4.374 0-7.8 3.427-7.8 7.802 0 4.098 3.186 7.206 7.465 7.37v3.828c0 .108.044.286.12.403.142.225.384.347.632.347.138 0 .277-.038.402-.118.264-.168 6.473-4.14 8.088-5.506 1.902-1.61 3.04-3.97 3.043-6.312v-.004-.005-.008c-.006-4.367-3.43-7.787-7.8-7.788zm3.787 12.972c-1.134.96-4.862 3.405-6.772 4.643V16.67c0-.414-.335-.75-.75-.75h-.396c-3.66 0-6.318-2.476-6.318-5.886 0-3.534 2.768-6.302 6.3-6.302l4.147.01h.002c3.532 0 6.3 2.766 6.302 6.296-.003 1.91-.942 3.844-2.514 5.176z\"></path> \n              </svg>\n              </div>\n            </button>\n          </div>\n          <div className=\"ProfileTweet-action\" style={styles.ProfileTweetAction}>\n            <button className=\"ProfileTweet-actionButton\" style={styles.ProfileTweetActionBtn}>\n              <div className=\"IconContainer\" style={styles.IconContainer}>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\">\n                <path fill=\"#657786\" d=\"M23.77 15.67c-.292-.293-.767-.293-1.06 0l-2.22 2.22V7.65c0-2.068-1.683-3.75-3.75-3.75h-5.85c-.414 0-.75.336-.75.75s.336.75.75.75h5.85c1.24 0 2.25 1.01 2.25 2.25v10.24l-2.22-2.22c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l3.5 3.5c.145.147.337.22.53.22s.383-.072.53-.22l3.5-3.5c.294-.292.294-.767 0-1.06zm-10.66 3.28H7.26c-1.24 0-2.25-1.01-2.25-2.25V6.46l2.22 2.22c.148.147.34.22.532.22s.384-.073.53-.22c.293-.293.293-.768 0-1.06l-3.5-3.5c-.293-.294-.768-.294-1.06 0l-3.5 3.5c-.294.292-.294.767 0 1.06s.767.293 1.06 0l2.22-2.22V16.7c0 2.068 1.683 3.75 3.75 3.75h5.85c.414 0 .75-.336.75-.75s-.337-.75-.75-.75z\"/></svg>\n              </div>\n              <div className=\"IconTextContainer\" style={styles.IconTextContainer}>\n                <div className=\"ProfileTweet-actionCount\" style={styles.ProfileTweetActionCount}>\n                  {data.retweet_count > 0 ? this.formatCount(data.retweet_count) : null}\n                </div>\n              </div>\n            </button>\n          </div>\n          <div className=\"ProfileTweet-action\" style={styles.ProfileTweetAction}>\n            <button className=\"ProfileTweet-actionButton\" style={styles.ProfileTweetActionBtn}>\n              <div className=\"IconContainer\" style={styles.IconContainer}>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\"> \n                  <path opacity=\"0\" d=\"M0 0h24v24H0z\"></path> \n                  <path fill='#657786' d=\"M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12zM7.354 4.225c-2.08 0-3.903 1.988-3.903 4.255 0 5.74 7.034 11.596 8.55 11.658 1.518-.062 8.55-5.917 8.55-11.658 0-2.267-1.823-4.255-3.903-4.255-2.528 0-3.94 2.936-3.952 2.965-.23.562-1.156.562-1.387 0-.014-.03-1.425-2.965-3.954-2.965z\"></path> \n              </svg>\n              </div>\n              <div className=\"IconTextContainer\" style={styles.IconTextContainer}>\n                <div className=\"ProfileTweet-actionCount\" style={styles.ProfileTweetActionCount}>\n                  {data.favorite_count > 0 ? this.formatCount(data.favorite_count) : null}\n                </div>\n              </div>\n            </button>\n          </div>\n        </a>\n      </div>\n    )\n  }\n}\n\nFooter.propTypes = {\n  'data': PropTypes.object\n}\n\nFooter.displayName = 'Footer'\n\nexport default Footer\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Header from './Header'\nimport Text from './Text'\nimport Media from './Media'\nimport Footer from './Footer'\nimport styles from './styles'\nimport {cloneDeep} from './utils'\n\nclass Modal extends React.Component {\n  constructor(props, context) {\n    super(props, context)\n  }\n\n  close () {\n    this.context.closeModal()\n  }\n\n  render () {\n    if (typeof window === \"undefined\") return null\n\n    let {data, modalIndex} = this.props, isRT = false\n    let MediaComponent = null\n\n    // use retweet as data if its a RT\n    if (data.retweeted_status) {\n      data = data.retweeted_status\n      isRT = true\n    }\n\n    let media = data.entities.media[modalIndex]\n\n    if (data.extended_entities && data.extended_entities.media) {\n      media = data.extended_entities.media[modalIndex]\n    }\n\n    const tweetStyle = {\n      'backgroundColor': '#ffffff',\n      'minHeight': '51px',\n      'minWidth': '350px',\n      'color': 'white',\n      'fontFamily': '\"Helvetica Neue\", \"Helvetica\", \"Arial\", \"sans-serif\"',\n      'fontSize': '14px',\n      'lineHeight': '20px',\n      'listStyleImage': 'none',\n      'listStylePosition': 'outisde',\n      'listStyleType': 'none',\n      'position': 'relative',\n      'textAlign': 'start'\n    }\n\n    let contentStyle = cloneDeep(styles.content)\n    contentStyle.padding = styles.tweet.padding\n\n    let modalWrap = {\n      'position': 'relative',\n      'display': 'inline-block',\n      'verticalAlign': 'middle',\n      'margin': '0 auto',\n      'zIndex': 20,\n      'marginTop': '50px',\n      'borderRadius': '5px',\n      'overflow': 'hidden',\n    }\n\n    let imgStyle = {\n      'width': '100%',\n      'margin': '0 auto',\n      'display': 'block'\n    }\n\n    let imgWrapStyle = {\n      'width': '100%',\n      'background': 'black'\n    }\n\n    let closeModalStyle = {\n      'height': '50px',\n      'width': '100%',\n      'display': 'flex',\n      'justifyContent': 'flex-end',\n      'alignItems': 'center',\n      'background': 'white',\n    }\n\n    const w = media.sizes.large.w;\n    const h = media.sizes.large.h;\n\n    if (w > 1000) {\n      if (h > 650) {\n        imgStyle.width = `${(media.sizes.large.w / media.sizes.large.h) * 650}px`\n         modalWrap.width = imgStyle.width;\n      } \n      else {\n        modalWrap.width = `${(media.sizes.large.w / media.sizes.large.h) * 650}px`\n        imgStyle.height = `${(media.sizes.large.h / media.sizes.large.w) * 1000}px`\n      }\n    }\n    else {\n      if (h > 650) {\n        modalWrap.width = `${(media.sizes.large.w / media.sizes.large.h) * 650}px`\n        imgStyle.width = `${(media.sizes.large.w / media.sizes.large.h) * 650}px`\n      }\n      else {\n        modalWrap.width = `${w}px`\n      }\n    }\n\n    return (\n      <div className=\"Modal\" style={styles.Modal}>\n        <span style={{'height': '100%', 'display': 'inline-block', 'verticalAlign': 'middle'}} />\n        <div className=\"ModalClose\" style={styles.ModalClose} onClick={this.close.bind(this)} />\n        <div className=\"Modal-wrap\" style={modalWrap}>\n          <div className=\"closeModal\" style={closeModalStyle}  onClick={this.close.bind(this)}>\n            <svg fill=\"#657786\" style={{'margin': '10px'}} height=\"28\" viewBox=\"0 0 24 24\" width=\"28\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n              <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n            </svg>\n          </div>\n          <div className=\"tweet\" style={tweetStyle}>\n            <div className=\"media-wrap\" style={imgWrapStyle}>\n              <img src={media.media_url} style={imgStyle} />\n            </div>\n            <div className=\"content\" style={contentStyle}>\n              <Header data={data} />\n              <Text data={data} />\n              <Footer data={data} />\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nModal.contextTypes = {\n  'closeModal': PropTypes.func\n}\n\nModal.propTypes = {\n  'data': PropTypes.object,\n  'active': PropTypes.number\n}\n\nModal.defaultProps = {\n  'data': {\n    'entities': {},\n    'user': {}\n  },\n  'active': 0\n}\n\nexport default Modal\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles'\nimport Text from './Text'\n\nclass Quote extends React.Component {\n  render () {\n    const {data, linkProps} = this.props\n\n    return (\n      <div className=\"QuoteTweet\" style={styles.QuoteTweet}>\n        <a className=\"QuoteTweet-link\" style={styles.QuoteLink} href={`https://twitter.com/${data.user.screen_name}/status/${data.id_str}`} {...linkProps} />\n        <div className=\"QuoteTweet-innerContainer\" style={styles.QuoteTweetInner}>\n          <div className=\"QuoteTweet-originalAuthor\" style={styles.QuoteTweetAuthor}>\n            <b>{data.user.name}</b>\n            <span className=\"QuoteTweet-screenname\" style={styles.time}>{' '}{'@'}{data.user.screen_name}</span>\n          </div>\n          <div className=\"QuoteTweet-text\" style={styles.QuoteTweetText}>\n            <Text data={data} />\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nQuote.propTypes = {\n  'data': PropTypes.object\n}\n\nQuote.displayName = 'Quote'\n\nexport default Quote\n\n","/**\n * tweet component - fork of https://www.npmjs.com/package/react-tweet\n */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport Context from './Context'\nimport Header from './Header'\nimport Text from './Text'\nimport Media from './Media'\nimport Modal from './Modal'\nimport Quote from './Quote'\nimport Footer from './Footer'\nimport styles from './styles'\n\nclass Tweet extends React.Component {\n  constructor (props) {\n    super(props)\n    this.toggleModal = this.toggleModal.bind(this)\n    this.closeModal = this.closeModal.bind(this)\n    this.state = {\n      'modalActive': false,\n      'modalIndex': 0,\n      positionStyles: {}\n    }\n  }\n\n  toggleModal (idx) {\n    this.setState({\n      'modalActive': true,\n      'modalIndex': idx\n    })\n  }\n\n  closeModal () {\n    this.setState({\n      'modalActive': false\n    })\n  }\n\n  getChildContext () {\n    return {\n      'toggleModal': this.toggleModal,\n      'closeModal': this.closeModal\n    }\n  }\n\n  updatePosition = () => {\n    if (this.tweet) {\n      const targets = this.tweet.getElementsByClassName('targeted');\n      if (targets.length) {\n        const target = targets[0];\n        const parentPosition = this.tweet.getBoundingClientRect();\n        const childPosition = target.getBoundingClientRect();\n        const left = -(childPosition.left - parentPosition.left - childPosition.width/2);\n        const top = -(childPosition.top - parentPosition.top - childPosition.height/2);\n        if (this.state.positionStyles.left !== left || this.state.positionStyles.top !== top) {\n          this.setState({\n            positionStyles: {\n              left,\n              top,\n            }\n          });\n        }\n          \n      } else if (!this.state.positionStyles.left) {\n        const boxWidth = this.props.targetDimensions.width * 5;\n        this.setState({\n          positionStyles: {\n            left: Math.random() * boxWidth - boxWidth / 2,\n            height: Math.random() * boxWidth - boxWidth / 2,\n          }\n        })\n      }\n    }\n  }\n\n  componentDidMount = () => {\n    // this.updatePosition();\n    setTimeout(() => this.updatePosition(), 500);\n  }\n\n  componentDidUpdate = () => {\n    // this.updatePosition();\n    setTimeout(this.updatePosition(), 500);\n  }\n\n  render () {\n    const {\n      modalActive, \n      modalIndex,\n      positionStyles,\n    } = this.state\n    let {\n      data, \n      targetTerm,\n      linkProps,\n    } = this.props, \n    isRT = false\n    let MediaComponent = null, QuoteComponent = null\n    \n    //Support for extended tweets\n    if ('full_text' in data) {\n      data.text = data.full_text;\n\n      if ('quoted_status' in data) {\n        data.quoted_status.text = data.quoted_status.full_text;\n      }\n      \n      if ('retweeted_status' in data) {\n        data.retweeted_status.text = data.retweeted_status.full_text;\n\n        if ('quoted_status' in data.retweeted_status) {\n          data.retweeted_status.quoted_status.text = data.retweeted_status.quoted_status.full_text;\n        }\n      }\n    }\n    \n    if ('extended_tweet' in data) {\n      data.text = data.extended_tweet.full_text;\n      data.entities = data.extended_tweet.entities;\n      data.extended_entities = data.extended_tweet.extended_entities;\n      data.display_text_range = data.extended_tweet.display_text_range;\n    }\n    if ('quoted_status' in data) {\n      if ('extended_tweet' in data.quoted_status) {\n        data.quoted_status.text = data.quoted_status.extended_tweet.full_text;\n        data.quoted_status.entities = data.quoted_status.extended_tweet.entities;\n        data.quoted_status.extended_entities = data.quoted_status.extended_tweet.extended_entities;\n        data.quoted_status.display_text_range = data.quoted_status.extended_tweet.display_text_range;\n      }\n    }\n    if ('retweeted_status' in data) {\n      if ('extended_tweet' in data.retweeted_status) {\n        data.retweeted_status.text = data.retweeted_status.extended_tweet.full_text;\n        data.retweeted_status.entities = data.retweeted_status.extended_tweet.entities;\n        data.retweeted_status.extended_entities = data.retweeted_status.extended_tweet.extended_entities;\n        data.retweeted_status.display_text_range = data.retweeted_status.extended_tweet.display_text_range;\n      }\n      if (data.retweeted_status.is_quote_status) {\n        if ('extended_tweet' in data.retweeted_status.quoted_status) {\n          data.retweeted_status.quoted_status.text = data.retweeted_status.quoted_status.extended_tweet.full_text;\n          data.retweeted_status.quoted_status.entities = data.retweeted_status.quoted_status.extended_tweet.entities;\n          data.retweeted_status.quoted_status.extended_entities = data.retweeted_status.quoted_status.extended_tweet.extended_entities;\n          data.retweeted_status.quoted_status.display_text_range = data.retweeted_status.quoted_status.extended_tweet.display_text_range;\n        }\n      }\n    }\n    \n    // use retweet as data if its a RT\n    if (data.retweeted_status) {\n      data = data.retweeted_status\n      isRT = true\n    }\n\n    // use Media component if media entities exist\n    if (data.entities && data.entities.media) {\n      MediaComponent = <Media  autoPlay={this.props.autoPlay} media={data.entities.media} />\n    }\n\n    // extended_entities override, these are multi images, videos, gifs\n    if (data.extended_entities && data.extended_entities.media) {\n      MediaComponent = <Media autoPlay={this.props.autoPlay} media={data.extended_entities.media} />\n    }\n\n    // use Quote component if quoted status exists\n    if (data.quoted_status) {\n      QuoteComponent = <Quote data={data.quoted_status} linkProps={linkProps}/>\n    }\n\n    const bindRef = tweet => {\n      this.tweet = tweet;\n    }\n\n    return (\n      <div \n        ref={bindRef} \n        className=\"tweet\" \n        style={{\n          ...styles.tweet, \n          ...positionStyles,\n        }}>\n        {isRT ? <Context {... this.props} /> : null}\n        <div className=\"content\" style={styles.content}>\n          <Header data={data} linkProps={linkProps} />\n          <a style={styles.link} href={`https://twitter.com/${data.user.screen_name}/status/${data.id_str}`} {...linkProps}>\n            <Text targetTerm={targetTerm} data={data} />\n          </a>\n          {MediaComponent}\n          {QuoteComponent}\n          <Footer data={data} linkProps={linkProps} />\n        </div>\n        {modalActive ? <Modal data={data} modalIndex={modalIndex} /> : null}\n      </div>\n    )\n  }\n}\n\nTweet.childContextTypes = {\n  'toggleModal': PropTypes.func,\n  'closeModal': PropTypes.func\n}\n\nTweet.propTypes = {\n  'data': PropTypes.object,\n  'linkProps': PropTypes.object\n}\n\nTweet.defaultProps = {\n  'data': {\n    'entities': {},\n    'user': {}\n  },\n  'linkProps': {}\n}\n\nexport default Tweet\n","/**\n * This module exports a react-tweet export\n * (see https://github.com/mannynotfound/react-tweet)\n */\nimport Tweet from './Tweet';\n\nexport default Tweet;","const extractTargetTerm = children => {\n if (children.length) {\n  const decoratedTerm = children[0];\n  const completeExpression = decoratedTerm.slice(1);\n  const values = completeExpression.split(':');\n  return {\n    term: values[0],\n    options: values.slice(1)\n  }\n }\n return '';\n}\n\nexport default extractTargetTerm;","\n\nconst findRelatedTweets = (tweets, targetTerm, grabOnlyExactTweetMatches = false) => {\n  const term = targetTerm.toLowerCase();\n  return tweets.filter(tweet => {\n    let text = tweet.clean.toLowerCase();\n    if (grabOnlyExactTweetMatches) {\n      text = tweet.text.toLowerCase();\n    }\n    return text.includes(term);\n  })\n}\n\nexport default findRelatedTweets;","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport Tweet from './Tweet';\nimport extractTargetTerm from '../helpers/extractTargetTerm';\nimport findRelatedTweets from '../helpers/findRelatedTweets';\n\nconst mapTweetToRender = tweet => ({\n  ...tweet,\n  id_str: tweet.id,\n  user: {\n    name: tweet.from_user_name,\n    screen_name: tweet.from_user_realname,\n    profile_image_url: tweet.from_user_profile_image_url,\n  },\n  entities: {\n    // media: \n    //   tweet.medias_files.split(',')\n    // ,\n    // urls: [],\n    // user_mentions: [],\n    // hashtags: [],\n    // symbols: []\n  }\n});\n\nclass TweetsTake extends Component {\n  render = () => {\n    const {\n      props: {\n        children,\n      },\n      context: {\n        tweets = [],\n        cluster = 'all clusters',\n        settings = {},\n      },\n      target,\n      container,\n    } = this;\n\n    const {\n      grabOnlyExactTweetMatches = false,\n    } = settings;\n\n    const {term: targetTerm, options = []} = extractTargetTerm(children);\n    const relatedTweets = findRelatedTweets(\n      tweets.filter(tweet => {\n        if (cluster === 'all clusters') {\n          return true;\n        }\n        return tweet.cluster === cluster;\n      })\n      , targetTerm, grabOnlyExactTweetMatches);\n\n    const bindTargetRef = target => {\n      this.target = target;\n    }\n    const bindContainer = container => {\n      this.container = container;\n    }\n    let targetDimensions = {};\n    let containerStyle = {};\n    if (target && container) {\n      targetDimensions = target.getBoundingClientRect();\n      const containerDimensions = container.getBoundingClientRect();\n      containerStyle = {\n        left: (targetDimensions.x - containerDimensions.x - targetDimensions.width/2), \n        top: (targetDimensions.y - containerDimensions.y - targetDimensions.height/2),\n        // left: -(targetDimensions.width/2), \n        // top: -(targetDimensions.height/2),\n      };\n    }\n    return (\n      <span ref={bindContainer} className=\"tweet-take\">\n        <span className=\"take-anchor\" ref={bindTargetRef}>{targetTerm}</span>\n        {\n          relatedTweets\n          .map(tweet => {\n            return (\n              <div\n                style={containerStyle}\n                key={tweet.id} \n                className=\"tweet-container\"\n              >\n                <Tweet \n                  targetDimensions={targetDimensions} \n                  data={mapTweetToRender(tweet)} \n                  targetTerm={targetTerm}\n                />\n              </div>\n            )\n          })\n        }\n      </span>\n    )\n\n  }\n}\n\n\nTweetsTake.contextTypes = {\n  tweets: PropTypes.array,\n  cluster: PropTypes.string,\n  settings: PropTypes.object,\n}\n\nexport default TweetsTake;","const findRelatedCaptions = (captions, targetTerm) => {\n  const term = targetTerm.toLowerCase();\n  return captions.filter((caption, index) => {\n    const text = caption.caption.toLowerCase();\n\n    return text.includes(term);\n  })\n}\n\nexport default findRelatedCaptions;","import React, {Component} from 'react';\n\nclass Caption extends Component {\n  render = () => {\n    const {\n      props: {\n        caption,\n        targetDimensions,\n        cropCaption = false,\n        index,\n        captionLayout = 'align',\n      },\n    } = this;\n    if (!caption || !caption.image) {\n      return null;\n    }\n    const bindRef = image => {\n      this.image = image;\n    };\n    const imageRatio = +caption.image.imageHeight / +caption.image.imageWidth;\n    \n    const captionTargetWidth = targetDimensions.width;\n    const captionWidthRatio = +caption.width;\n    const captionRatio = caption.width / caption.height;\n    const imageWidth = +caption.image.imageWidth;\n    const captionInitialWidth = imageWidth * captionWidthRatio;\n    \n    const imageFinalWidth = (imageWidth * captionTargetWidth) / captionInitialWidth;\n    const imageFinalHeight = imageFinalWidth * imageRatio;\n    const left = - caption.x * imageFinalWidth;\n    const top = - caption.y * imageFinalHeight - (caption.height * imageFinalHeight) / 2\n    const style = {\n      width: imageFinalWidth,\n      height: imageFinalHeight,\n      left,\n      top,\n      position: 'absolute'\n    }\n    let containerStyle = {};\n    if (cropCaption) {\n      containerStyle = {\n        width: captionTargetWidth,\n        // border: '3px solid red',\n        height: captionTargetWidth * captionRatio,\n        left: 0,\n        top: -(captionTargetWidth * captionRatio * .5),\n        overflow: 'hidden',\n        position: 'absolute'\n      }\n      style.top += (containerStyle.height * .5)\n      // style.left -= (containerStyle.width * .5)\n      if (captionLayout === 'stack') {\n        containerStyle.left = index * 5;\n        containerStyle.top = index * 5;\n      }\n    } else {\n      if (captionLayout === 'stack') {\n        style.top += index * 5;\n        style.left += index * 5;\n      }\n    }\n\n    return (\n      <div style={containerStyle}>\n        <img \n          ref={bindRef} \n          src={caption.src} \n          alt={caption.src}\n          style={style}\n        />\n      </div>\n    )\n      \n  }\n}\n\nexport default Caption;","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport extractTargetTerm from '../helpers/extractTargetTerm';\nimport findRelatedCaptions from '../helpers/findRelatedCaptions';\nimport {getImageSrc} from '../helpers/client';\n\nimport Caption from './Caption';\nclass CaptionsTake extends Component {\n\n  render = () => {\n    const {\n      props: {\n        children,\n      },\n      context: {\n        captions = [],\n        cluster = 'all clusters',\n        imagesMap = {},\n        settings = {}\n      },\n      target,\n      container,\n    } = this;\n\n    const {\n      cropCaptions : initialCropCaptions = false,\n      imagesWidth : initialImagesWidth = 'word width',\n      captionsLayout : initialCaptionsLayout = 'align'\n    } = settings;\n\n    const {term: targetTerm, options = []} = extractTargetTerm(children);\n    let cropCaptions = initialCropCaptions;\n    if (options.includes('crop')) {\n      cropCaptions = true;\n    } else if (options.includes('extend')) {\n      cropCaptions = false;\n    }\n    let imagesWidth = initialImagesWidth;\n    options.forEach(o => {\n      const match = o.match(/width([\\d]+)/);\n      if (match && match[1]) {\n        const candidate = +match[1];\n        if (!isNaN(candidate)) {\n          imagesWidth  = candidate;\n        }\n      }\n    });\n    let captionsLayout = initialCaptionsLayout;\n    if (options.includes('align')) {\n      captionsLayout = 'align';\n    } else if (options.includes('stack')) {\n      captionsLayout = 'stack';\n    }\n    const relatedImages = findRelatedCaptions(\n      captions.filter(caption => {\n        // console.log(caption.tweetCluster, cluster, caption.tweetCluster === cluster)\n        if (cluster === 'all clusters') {\n          return true;\n        }\n        return caption.tweetCluster === cluster;\n      })\n    , targetTerm);\n    const displayedCaptions = relatedImages.sort((a, b) => {\n      if (a.score > b.score) {\n        return -1;\n      }\n      return 1;\n    })\n    .map(caption => ({\n      ...caption,\n      image: imagesMap[caption.image_id],\n      src: getImageSrc(imagesMap[caption.image_id])\n    }));\n    const bindTargetRef = target => {\n      this.target = target;\n    }\n    const bindContainer = container => {\n      this.container = container;\n    }\n    let targetDimensions = {};\n    let containerStyle = {};\n    if (target && container) {\n      targetDimensions = target.getBoundingClientRect();\n      const containerDimensions = container.getBoundingClientRect();\n      containerStyle = {\n        left: (targetDimensions.x - containerDimensions.x), \n        top: (targetDimensions.y - containerDimensions.y),\n      };\n      if (captionsLayout === 'stack') {\n        containerStyle.left -= (displayedCaptions.length * .5) * 5\n        containerStyle.top -= (displayedCaptions.length * .5) * 5\n      }\n    }\n    return (\n      <span \n        ref={bindContainer} \n        className=\"captions-take\"\n        style={{\n          minWidth: imagesWidth === 'word width' ? undefined : +imagesWidth,\n          display: imagesWidth === 'word width' ? undefined : 'inline-block'\n\n        }}\n      >\n        <span className=\"take-anchor\" ref={bindTargetRef}>\n          {targetTerm}\n        </span>\n        {\n          displayedCaptions\n          .map((caption, index) => {\n            return (\n              <div\n                style={containerStyle}\n                key={index} \n                className=\"caption-container\"\n              >\n                <Caption \n                  key={index} \n                  caption={caption} \n                  targetDimensions={{\n                    ...targetDimensions,\n                    width: imagesWidth === 'word width' ? targetDimensions.width : +imagesWidth\n                  }} \n                  cropCaption={cropCaptions}\n                  index={index}\n                  captionLayout={captionsLayout}\n                />\n              </div>\n            )\n          })\n        }\n      </span>\n    )\n\n  }\n}\n\n\nCaptionsTake.contextTypes = {\n  captions: PropTypes.array,\n  imagesMap: PropTypes.object,\n  cluster: PropTypes.string,\n  settings: PropTypes.object,\n}\n\nexport default CaptionsTake;","const findRelatedLabels = (captions, targetTerm) => {\n  const term = targetTerm.toLowerCase();\n  return captions.filter((caption, index) => {\n    const text = caption.description.toLowerCase();\n\n    return text.includes(term);\n  })\n}\n\nexport default findRelatedLabels;","import React, {Component} from 'react';\n\nclass Label extends Component {\n  render = () => {\n    const {\n      props: {\n        label,\n        targetDimensions,\n        index,\n        layout,\n      }\n        \n    } = this;\n    if (!label || !label.image) {\n      return label;\n    }\n    const bindRef = image => {\n      this.image = image;\n    };\n\n    const imageRatio = +label.image.imageHeight / +label.image.imageWidth;\n    \n    const labelWidth = targetDimensions.width * 1.5;\n    const labelHeight = labelWidth * imageRatio;\n    let left = Math.random() * (targetDimensions.width * 2) - targetDimensions.width;\n    let top = Math.random() * (targetDimensions.width * 2) - targetDimensions.width;\n    // const captionWidthRatio = +caption.width;\n    // const imageWidth = +caption.image.imageWidth;\n    // const captionInitialWidth = imageWidth * captionWidthRatio;\n    if (layout === 'superpoze') {\n      left = 0;\n      top = -labelHeight / 2;\n    } else if (layout === 'stack') {\n      left = index * 5;\n      top = index * 5;\n    }\n    const style = {\n      width: labelWidth,\n      height: labelHeight,\n      left,\n      top,\n      position: 'absolute'\n    }\n    return (\n      <img \n        ref={bindRef} \n        src={label.src} \n        alt={label.src}\n        style={style}\n      />\n    )      \n  }\n}\n\nexport default Label;","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport extractTargetTerm from '../helpers/extractTargetTerm';\nimport findRelatedLabels from '../helpers/findRelatedLabels';\nimport {getImageSrc} from '../helpers/client';\n\nimport Label from './Label';\nclass LabelsTake extends Component {\n\n  render = () => {\n    const {\n      props: {\n        children,\n      },\n      context: {\n        labels = [],\n        cluster = 'all clusters',\n        imagesMap = {},\n        settings = {},\n      },\n      target,\n      container,\n    } = this;\n\n    const {\n      labelsLayout: initialLabelsLayout = 'random',\n      imagesWidth : initialImagesWidth = 'word width'\n\n    } = settings;\n    const {term: targetTerm, options = []} = extractTargetTerm(children);\n\n    let imagesWidth = initialImagesWidth;\n    options.forEach(o => {\n      const match = o.match(/width([\\d]+)/);\n      if (match && match[1]) {\n        const candidate = +match[1];\n        if (!isNaN(candidate)) {\n          imagesWidth  = candidate;\n        }\n      }\n    })\n    let labelsLayout = initialLabelsLayout;\n    if (options.includes('align')) {\n      labelsLayout = 'align';\n    } else if (options.includes('stack')) {\n      labelsLayout = 'stack';\n    } else if (options.includes('superpoze')) {\n      labelsLayout = 'superpoze';\n    }\n\n    const relatedImages = findRelatedLabels(\n      labels.filter(label => {\n        if (cluster === 'all clusters') {\n          return true;\n        }\n        return label.tweetCluster === cluster;\n      })\n      , targetTerm);\n    const displayedLabels = relatedImages.sort((a, b) => {\n      if (a.score > b.score) {\n        return -1;\n      }\n      return 1;\n    })\n    .map(label => ({\n      ...label,\n      image: imagesMap[label.image_id],\n      src: getImageSrc(imagesMap[label.image_id])\n    }));\n    const bindTargetRef = target => {\n      this.target = target;\n    }\n    const bindContainer = container => {\n      this.container = container;\n    }\n    let targetDimensions = {};\n    let containerStyle = {};\n    if (target && container) {\n      targetDimensions = target.getBoundingClientRect();\n      const containerDimensions = container.getBoundingClientRect();\n      containerStyle = {\n        left: (targetDimensions.x - containerDimensions.x), \n        top: (targetDimensions.y - containerDimensions.y),\n      };\n    }\n\n    if (labelsLayout === 'stack') {\n      containerStyle.left = -(displayedLabels.length / 2) * 5;\n      containerStyle.top = -(displayedLabels.length / 2) * 5;\n    }\n    return (\n      <span \n        ref={bindContainer}\n        style={{\n          minWidth: imagesWidth === 'word width' ? undefined : +imagesWidth * 1.3,\n          display: imagesWidth === 'word width' ? undefined : 'inline-block'\n        }}\n        className=\"labels-take\"\n      >\n        <span className=\"take-anchor\" ref={bindTargetRef}>\n          {targetTerm}\n        </span>\n        {\n          displayedLabels.map((label, index) => {\n            return (\n              <div\n                style={containerStyle}\n                key={index} \n                className=\"label-container\"\n              >\n                <Label \n                  key={index} \n                  label={label} \n                  index={index}\n                  layout={labelsLayout}\n                  targetDimensions={{\n                    ...targetDimensions,\n                    width: imagesWidth === 'word width' ? targetDimensions.width : +imagesWidth\n\n                  }} \n                />\n              </div>\n            )\n          })\n        }\n      </span>\n    )\n\n  }\n}\n\n\nLabelsTake.contextTypes = {\n  labels: PropTypes.array,\n  imagesMap: PropTypes.object,\n  cluster: PropTypes.string,\n  settings: PropTypes.object,\n}\n\nexport default LabelsTake;","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport redraft from 'redraft';\nimport {\n  hashtagStrategy, \n  tildeStrategy,\n  dollarStrategy\n} from '../helpers/draftStrategies';\nimport TweetsTake from './TweetsTake';\nimport CaptionsTake from './CaptionsTake';\nimport LabelsTake from './LabelsTake';\n\n/**\n *  You can use inline styles or classNames inside your callbacks\n */\nconst styles = {\n  code: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n    fontFamily: '\"Inconsolata\", \"Menlo\", \"Consolas\", monospace',\n    fontSize: 16,\n    padding: 2,\n  },\n  codeBlock: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n    fontFamily: '\"Inconsolata\", \"Menlo\", \"Consolas\", monospace',\n    fontSize: 16,\n    padding: 20,\n  },\n};\n \n// just a helper to add a <br /> after a block\nconst addBreaklines = (children) => children.map((child, i) => [child, <br key={i + 1} />]);\n \n/**\n * Define the renderers\n */\nconst renderers = {\n  /**\n   * Those callbacks will be called recursively to render a nested structure\n   */\n  inline: {\n    // The key passed here is just an index based on rendering order inside a block\n    BOLD: (children, { key }) => <strong key={key}>{children}</strong>,\n    ITALIC: (children, { key }) => <em key={key}>{children}</em>,\n    UNDERLINE: (children, { key }) => <u key={key}>{children}</u>,\n    CODE: (children, { key }) => <span key={key} style={styles.code}>{children}</span>,\n  },\n  /**\n   * Blocks receive children and depth\n   * Note that children are an array of blocks with same styling,\n   */\n  blocks: {\n    unstyled: (children) => children.map((child, index) => <div className=\"unstyled\" key={index}>{child}</div>),\n    blockquote: (children, index) => <blockquote key={index} >{addBreaklines(children)}</blockquote>,\n    'header-one': (children, index) => children.map(child => <h1 key={index}>{child}</h1>),\n    'header-two': (children, index) => children.map(child => <h2 key={index}>{child}</h2>),\n    // You can also access the original keys of the blocks\n    'code-block': (children, { keys }) => <pre style={styles.codeBlock} key={keys[0]}>{addBreaklines(children)}</pre>,\n    // or depth for nested lists\n    'unordered-list-item': (children, { depth, keys }) => <ul key={keys[keys.length - 1]} className={`ul-level-${depth}`}>{children.map(child => <li>{child}</li>)}</ul>,\n    'ordered-list-item': (children, { depth, keys }) => <ol key={keys.join('|')} className={`ol-level-${depth}`}>{children.map((child, index) => <li key={keys[index]}>{child}</li>)}</ol>,\n    // If your blocks use meta data it can also be accessed like keys\n    // atomic: (children, { keys, data }) => children.map((child, i) => <Atomic key={keys[i]} {...data[i]} />),\n  },\n  /**\n   * Entities receive children and the entity data\n   */\n  // entities: {\n  //   // key is the entity key value from raw\n  //   LINK: (children, data, { key }) => <Link key={key} to={data.url}>{children}</Link>,\n  // },\n  decorators: [\n    {\n      strategy: hashtagStrategy,\n      component: ({ children, key }) => {\n        return <TweetsTake key={key}>{children}</TweetsTake>\n      },\n    },\n    {\n      strategy: tildeStrategy,\n      component: ({ children, key }) => <CaptionsTake key={key}>{children}</CaptionsTake>,\n    },\n    {\n      strategy: dollarStrategy,\n      component: ({ children, key }) => <LabelsTake key={key}>{children}</LabelsTake>,\n    },\n  ],\n}\n\nclass RendererView extends Component {\n  shouldComponentUpdate = (props, state, context) => {\n    return context.autoUpdateEnabled;\n  }\n  \n  render = () => {\n    const {\n      context: {\n        rawContent,\n        renderCss = '',\n        projectMetadata = {},\n        settings = {},\n      }\n    } = this;\n\n    const {\n      title,\n      subtitle,\n      authors,\n      description\n    } = projectMetadata;\n\n    const {\n      lineHeight = '2'\n    } = settings;\n    const rendered = redraft(rawContent, renderers);\n    \n    return (\n      <div className=\"renderer-view\">\n        <div className=\"poster-container\">\n          <div \n            className={`poster-contents`}\n            style={{\n              lineHeight: +lineHeight + 'em'\n            }}\n          >\n          {rendered}\n          </div>\n          <div className=\"poster-footer-container\">\n            <footer className=\"poster-footer\">\n              <div className=\"main-footer-contents\">\n                <h1 className=\"project-title\">{title}</h1>\n                <h2 className=\"project-subtitle\">{subtitle}</h2>\n                <h2 className=\"project-authors\">{authors}</h2>\n                <div className=\"project-presentation\">\n                  {description}\n                </div>\n              </div>\n              <div className=\"footer-meta\">\n                <h1 className=\"project-workshop-title\">\n                  Especes de milieux | 2019\n                </h1>\n                <h3 className=\"project-animators\">\n                  Donato Ricci\n                  <br/>\n                  Robin de Mourat\n                </h3>\n                <img \n                  className=\"logo\"\n                  alt=\"logo\"\n                  src={process.env.PUBLIC_URL + '/logo-ensci.svg'}\n                />\n              </div>\n            </footer>\n          </div>\n        </div>\n        <style>{renderCss}</style>\n      </div>\n    )\n  }\n    \n}\n\nRendererView.contextTypes = {\n  rawContent: PropTypes.object,\n  renderCss: PropTypes.string,\n  autoUpdateEnabled: PropTypes.bool,\n  projectMetadata: PropTypes.object,\n  settings: PropTypes.object,\n}\nexport default RendererView;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport uniq from 'lodash/uniq';\nimport {Editor} from 'draft-js';\nimport Frame, { FrameContextConsumer } from 'react-frame-component';\nimport RendererView from './RendererView';\nimport SettingsManager from './SettingsManager';\nimport Modal from 'react-modal';\n\nModal.setAppElement(document.body);\n\nconst EditorView = (noProps, {\n  handleUpdateState,\n  editorState,\n  autoUpdateEnabled,\n  setAutoUpdateEnabled,\n  cluster,\n  updateDataForGroup,\n  dataLoaded,\n  projectMetadata,\n  tweets = [],\n  setProjectMetadata,\n  updateCluster,\n  toggleSettings,\n  settingsOpen\n}) => {\n  const handleClickPrint = () => {\n    window.frames.preview.focus();\n    window.frames.preview.print();\n  }\n  const toggleAutoUpdate = () => {\n    setAutoUpdateEnabled(!autoUpdateEnabled)\n  }\n  const clusters = [\n    'all clusters',\n    ...uniq(tweets.map(t => t.cluster)).sort()\n  ]\n  const {\n    title,\n    subtitle,\n    authors,\n    description,\n  } = projectMetadata;\n  const handleMetadataChange = (e, key) => {\n    const value = e.target.value;\n    setProjectMetadata({\n      ...projectMetadata,\n      [key]: value\n    })\n  }\n  return (\n    <div className=\"editor-container\">\n      <div className=\"editor-column editing-column\">\n        <div className=\"text-editor-container\">\n\n          <Editor\n            editorState={editorState}\n            onChange={handleUpdateState}\n            placeholder={'Écrivez votre rébus ici en convoquant des #tweets, des ~légendes, ou des $labels'}\n          />\n          <div className=\"metadata-edition\">\n            <div className=\"control\">\n              <label>\n                Project title\n              </label>\n              <input\n                className=\"input\"\n                placeholder=\"project title\"\n                value={title}\n                onChange={e => handleMetadataChange(e, 'title')}\n              />\n            </div>\n            <div className=\"control\">\n              <label>\n                Project subtitle\n              </label>\n              <input\n                className=\"input\"\n                placeholder=\"project subtitle\"\n                value={subtitle}\n                onChange={e => handleMetadataChange(e, 'subtitle')}\n              />\n            </div>\n            <div className=\"control\">\n              <label>\n                Project authors\n              </label>\n              <input\n                className=\"input\"\n                placeholder=\"project authors\"\n                value={authors}\n                onChange={e => handleMetadataChange(e, 'authors')}\n              />\n            </div>\n\n          </div>\n\n          <div className=\"textarea-container\">\n            <label>\n              Project description\n            </label>\n            <textarea\n              className=\"textarea\"\n              placeholder=\"project description\"\n              value={description} \n              onChange={e => handleMetadataChange(e, 'description')}\n            />\n          </div>\n            \n        </div>\n        <h1 className=\"baseline\"><a href=\"https://medialab.sciences-po.fr\" target=\"blank\" rel=\"noopener\">médialab Sciences Po</a> | <i>rébus</i></h1>\n      </div>\n      <div className=\"editor-column preview-column\">\n        <Frame \n          name=\"preview\" \n          id=\"preview\"\n          head={\n            <link rel=\"stylesheet\" src={`${process.env.PUBLIC_URL}/fonts.css`} />\n          }\n        >\n        <FrameContextConsumer>\n        {( { document, window } ) => (\n          <RendererView window={window} document={document} />\n        )}\n      </FrameContextConsumer>\n        </Frame>\n        <div className=\"footer-buttons\">\n          <button onClick={toggleAutoUpdate}>\n            {autoUpdateEnabled ? 'disable auto-update': 'enable auto-update'}\n          </button>\n          <button onClick={toggleSettings}>\n            settings\n          </button>\n          <div>\n            {\n              clusters.map((thatCluster, index) => {\n                const handleClick = () => {\n                  updateCluster(thatCluster);\n                }\n                return (\n                  <a onClick={handleClick} className={`corpus-link-btn ${thatCluster === cluster ? 'is-active': ''}`} key={index} href={`#/?cluster=${encodeURIComponent(thatCluster)}`}>\n                    {thatCluster}\n                  </a>\n                );\n              })\n            }\n            {\n              !dataLoaded && <i>loading corpus</i>\n            }\n          </div>\n          {/*<Link to=\"render\">go to rendering view</Link>*/}\n          <button onClick={handleClickPrint}>\n            print\n          </button>\n        </div>\n      </div>\n\n      <Modal\n        isOpen={settingsOpen}\n        onRequestClose={toggleSettings}\n        contentLabel=\"Settings\"\n        style={{\n          content: {\n            maxWidth: '40%'\n          }\n        }}\n      >\n        <SettingsManager />\n      </Modal>\n    </div>\n  )\n}\n\nEditorView.contextTypes = {\n  handleUpdateState: PropTypes.func,\n  editorState: PropTypes.object,\n  autoUpdateEnabled: PropTypes.bool,\n  setAutoUpdateEnabled: PropTypes.func,\n  cluster: PropTypes.string,\n  updateDataForGroup: PropTypes.func,\n  dataLoaded: PropTypes.bool,\n  projectMetadata: PropTypes.object,\n  setProjectMetadata: PropTypes.func,\n  tweets: PropTypes.array,\n  updateCluster: PropTypes.func,\n  toggleSettings: PropTypes.func,\n  settingsOpen: PropTypes.bool,\n}\nexport default EditorView;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Route } from \"react-router-dom\";\nimport {convertToRaw, CompositeDecorator} from 'draft-js';\nimport {EditorState, ContentState} from 'draft-js';\nimport debounce from 'lodash/debounce';\nimport schemaDefaults from 'json-schema-defaults';\n\nimport {\n  getTweets,\n  getCaptions,\n  getPrintCss,\n  getLabels,\n  getImages,\n  fetchConfig,\n} from '../helpers/client';\n\nimport {\n  hashtagStrategy, \n  tildeStrategy,\n  dollarStrategy\n} from '../helpers/draftStrategies';\n\nimport {settingsSchema} from './SettingsManager';\n\nimport EditorView from './EditorView';\nimport RendererView from './RendererView';\n\nconst startingText = `Les ~mouse de Paris sont nos amis ils nettoient la ville ils la débarrassent des déjections qui risqueraient sinon d’encombrer nos évacuations.\nIls sont indispensables à nos vies ils sont nos amis bien qu’en réfléchissant à une définition simple une définition raisonnable et rapide et durable de ce qu’il est convenu d’appeler ami on soit contraint d’admettre que l’indispensable n’y a pas sa place un ami n’est pas quelqu’un d’indispensable un ami n’est pas indispensable à la vieil n’est pas nécessaire il est même contingent c’est justement ce qui le rend précieux de ce point de vue là un ami n’est pas un rat et le rat peut-être n’est pas notre ami.\nUn ami n’est pas quelqu’un d’indispensable.\nUn ami n’est pas indispensable à la vie.\nIl n’est pas nécessaire. \nIl est même contingent.\nDe ce point de vue là, un ami n’est pas un #rat et le $mouse, peut-être, n’est pas notre ami.`;\n\nconst HashtagSpan = ({children}) => \n  <span style={{color: 'blue'}}>\n    {children}\n  </span>\n\nconst TildeSpan = ({children}) => \n  <span style={{color: 'green'}}>\n    {children}\n  </span>\nconst DollarSpan = ({children}) => \n  <span style={{color: 'purple'}}>\n    {children}\n  </span>\n\n/**\n * decorators from the draft editor\n */\nconst compositeDecorator = new CompositeDecorator([\n  {\n    strategy: hashtagStrategy,\n    component: HashtagSpan,\n  },\n  {\n    strategy: tildeStrategy,\n    component: TildeSpan,\n  },\n  {\n    strategy: dollarStrategy,\n    component: DollarSpan,\n  },\n]);\n\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    const localText = localStorage.getItem('rebus/text');\n    const startText = localText || startingText;\n    const editorState = EditorState.createWithContent(\n        ContentState.createFromText(startText)\n    , compositeDecorator);\n    const localMetadata = localStorage.getItem('rebus/metadata');\n    const localSettings = localStorage.getItem('rebus/settings');\n    let projectMetadata = {\n      title: 'Rebus project title',\n      subtitle: 'Rebus project subtitle',\n      authors: 'Rebus project authors',\n      description: ` Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque efficitur dictum diam, fermentum pharetra lectus varius in. Nullam mollis, arcu eu maximus congue, risus nisl auctor metus, sed tempus velit lorem at ligula. Morbi porttitor enim quis arcu tincidunt, sed volutpat libero mollis. Suspendisse et nunc convallis, semper dui in, laoreet lorem. Nunc maximus mauris sapien, eu aliquet magna sodales nec. Nullam lacinia rutrum sapien, ac hendrerit orci porttitor finibus. Cras urna augue, imperdiet in ante a, vestibulum elementum erat. Ut risus enim, fringilla et blandit a, tincidunt in magna. Ut sem diam, ultricies id nisl vitae, faucibus consectetur lorem. Curabitur nec augue fermentum, eleifend libero sit amet, ornare nunc. Sed ac ornare velit. Duis tempus libero sed mauris aliquam tincidunt.`\n    };\n    if (localMetadata) {\n      try{\n        projectMetadata = JSON.parse(localMetadata);\n      } catch(e) {\n\n      }\n    }\n    let settings = schemaDefaults(settingsSchema);\n    if (localSettings) {\n      try{\n        settings = JSON.parse(localSettings);\n      } catch(e) {\n\n      }\n    }\n\n    this.state = {\n      editorState,\n      rawContent: convertToRaw(editorState.getCurrentContent()),\n      tweets: [],\n      captions: [],\n      images: [],\n      labels: [],\n      captionsMap: {},\n      renderCss: '',\n      cluster: 'all clusters',\n      autoUpdateEnabled: true,\n      captionsLoaded: false,\n      tweetsLoaded: false,\n      labelsLoaded: false,\n      imagesLoaded: false,\n      projectMetadata,\n      settingsOpen: false,\n      settings,\n    }\n    this.updateRawContent = debounce(this.updateRawContent, 1000);\n  }\n  componentDidMount = () => {\n    const position =  window.location.href;\n    let group = 'default';\n    const queryParts = position.split('?');\n    if (queryParts.length > 1) {\n      const queryRaw = queryParts.reverse()[0];\n      const parts = queryRaw.split('&').map(p => p.split('='))\n      const query = parts.reduce((res, tuple) => ({\n        ...res,\n        [tuple[0]]: decodeURIComponent(tuple[1])\n      }), {});\n      if (query.cluster) {\n        this.setState({\n          cluster: query.cluster,\n        })\n        // group = query.group;\n      }\n    }\n    getPrintCss()\n      .then((renderCss) => {\n        this.setState({renderCss})\n        return fetchConfig()\n      })\n      .then(config => {\n        window.CONFIG = config;\n        this.updateDataForGroup(group);\n      })\n      .catch(console.error)\n\n  }\n\n  static childContextTypes = {\n    editorState: PropTypes.object,\n    handleUpdateState: PropTypes.func,\n    captions: PropTypes.array,\n    images: PropTypes.array,\n    imagesMap: PropTypes.object,\n    labels: PropTypes.array,\n    rawContent: PropTypes.object,\n    tweets: PropTypes.array,\n    renderCss: PropTypes.string,\n    autoUpdateEnabled: PropTypes.bool,\n    setAutoUpdateEnabled: PropTypes.func,\n    updateCluster: PropTypes.func,\n    cluster: PropTypes.string,\n    group: PropTypes.string,\n    updateDataForGroup: PropTypes.func,\n    dataLoaded: PropTypes.bool,\n    projectMetadata: PropTypes.object,\n    setProjectMetadata: PropTypes.func,\n    settingsOpen : PropTypes.bool,\n    toggleSettings: PropTypes.func,\n    settings: PropTypes.object,\n    updateSettings: PropTypes.func,\n  }\n\n  getChildContext = () => ({\n    editorState: this.state.editorState,\n    handleUpdateState: this.handleUpdateState,\n    rawContent: this.state.rawContent,\n    tweets: this.state.tweets,\n    captions: this.state.captions,\n    images: this.state.images,\n    imagesMap: this.state.imagesMap,\n    labels: this.state.labels,\n    updateCluster: this.updateCluster,\n    cluster: this.state.cluster,\n    renderCss: this.state.renderCss,\n    autoUpdateEnabled: this.state.autoUpdateEnabled,\n    setAutoUpdateEnabled: this.setAutoUpdateEnabled,\n    group: this.state.group,\n    updateDataForGroup: this.updateDataForGroup,\n    dataLoaded: this.state.captionsLoaded \n    && this.state.imagesLoaded\n    && this.state.labelsLoaded\n    && this.state.tweetsLoaded,\n    projectMetadata: this.state.projectMetadata,\n    setProjectMetadata: this.setProjectMetadata,\n    toggleSettings: this.toggleSettings,\n    settingsOpen: this.state.settingsOpen,\n    settings: this.state.settings,\n    updateSettings: this.updateSettings,\n  })\n\n  setProjectMetadata = projectMetadata => {\n    this.setState({projectMetadata});\n    localStorage.setItem('rebus/metadata', JSON.stringify(projectMetadata));\n  }\n\n  updateCluster = cluster => {\n    this.setState({cluster});\n  }\n\n  updateSettings = settings => {\n    localStorage.setItem('rebus/settings', JSON.stringify(settings));\n    this.setState({settings});\n  }\n\n  toggleSettings = () => {\n    this.setState({\n      settingsOpen: !this.state.settingsOpen\n    })\n  }\n\n  updateDataForGroup = group => {\n    this.setState({\n      group,\n      captionsLoaded: false,\n      tweetsLoaded: false,\n      imagesLoaded: false,\n      labelsLoaded: false,\n    })\n\n    getTweets(group)\n      .then(tweets => {\n        this.setState({\n          tweets,\n          tweetsLoaded: true,\n        })\n      })\n      .catch(console.error);\n\n    getImages(group)\n      .then(images => {\n        const imagesMap = images.reduce((res, image) => ({\n          ...res,\n          [image.id]: image\n        }), {})\n        this.setState({\n          images,\n          imagesLoaded: true,\n          imagesMap,\n        })\n      })\n      .catch(console.error);\n\n    getLabels(group)\n      .then(labels => {\n        this.setState({\n          labels,\n          labelsLoaded: true,\n        })\n      })\n      .catch(console.error);\n      \n    getCaptions(group)\n      .then(captions => {\n          this.setState({\n            captions,\n            captionsLoaded: true,\n          });\n      }) \n      .catch(console.error)\n  }\n\n  setAutoUpdateEnabled = value => {\n    this.setState({\n      autoUpdateEnabled: value\n    })\n  }\n\n  updateRawContent = editorState => {\n    const rawContent = convertToRaw(\n      editorState.getCurrentContent()\n    );\n    const rawStr = rawContent.blocks.map(b => b.text).join('\\n');\n    localStorage.setItem('rebus/text', rawStr);\n    this.setState({rawContent});\n    setTimeout(this.setState({rawContent}));\n  }\n\n  handleUpdateState = editorState => {\n    this.setState({editorState});\n    this.updateRawContent(editorState);\n  }\n  render() {\n    return (\n        <div>\n          <Route path=\"/\" exact component={EditorView} />\n          <Route path=\"/render/\" exact component={RendererView} />\n        </div>\n    );\n  }\n}\n\nexport default App;\n","import React, { Component } from 'react';\nimport { HashRouter as Router } from \"react-router-dom\";\nimport Container from './components/Container';\nimport './App.scss';\n\nclass App extends Component {\n  render() {\n    return (\n      <Router>\n        <Container />\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}